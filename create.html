<!doctype html>

<html>
	<head>
		<title>LevelBuilder</title>
		<meta charset="utf-8" />

		<style type="text/css">

			#canvas{background-color: #686868;}

		</style>

		<script type="text/javascript">

			var vx = [];
			var eg = []

			var obj = {
				vertices: vx,
				edges: eg
			};

			document.addEventListener("DOMContentLoaded", init, false);

			function init()
			{
				var canvas = document.getElementById("canvas");
				canvas.addEventListener("mousedown", getPosition, false);
			}

			function getPosition(event)
			{
				var x = new Number();
				var y = new Number();
				var canvas = document.getElementById("canvas");


				if (event.x != undefined && event.y != undefined)
				{
					x = event.x;
					y = event.y;
					var oldX = x - canvas.offsetLeft;
					var oldY = y - canvas.offsetTop;
					x = oldX/480;
					y = oldY/800;

					var ctx = canvas.getContext("2d");
					ctx.beginPath();
					ctx.arc(oldX , oldY, 10, 0, 2*Math.PI);
					ctx.stroke();

					vx.push({x:x, y:y});

					eg.push([0]);
					for(var i = 0; i < vx.length; i++){
						for(var j = eg[i].length; j < vx.length; j ++){
							eg[i].push(0);
						}
					}


					document.getElementById("out").innerHTML = JSON.stringify(obj, null, 4);
				}
				else 
				{
					x = event.clientX + document.body.scrollLeft +
							document.documentElement.scrollLeft;
					y = event.clientY + document.body.scrollTop +
							document.documentElement.scrollTop;
				}

			}

		</script>

	</head>

	<body>
		<canvas id="canvas" width="480" height="800"></canvas>
		<div id="out" align="right"> 
		
		</div>
	</body>
</html>